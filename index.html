<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>我的學習機</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>

  <div class="app">

    <!-- Header -->
    <header class="hero">
      <div class="hero-left">
        <div class="hero-icon">📘</div>
        <div class="hero-text">
          <div class="hero-title">我的學習機</div>
          <div class="hero-sub">先選年級，再選模組開始練習</div>
        </div>
      </div>

      <button class="hero-parent" type="button" data-action="open-parent">
        家長
      </button>
    </header>

    <!-- Pages -->
    <main class="pages">

      <!-- Home -->
      <section id="page-home" class="page is-active" aria-label="首頁">
        <div class="panel">
          <div class="panel-head">
            <div class="panel-title">選擇年級</div>
            <div id="gradeBadge" class="badge">未選年級</div>
          </div>

          <div class="grade-row" id="gradeRow">
            <button class="grade-chip" type="button" data-action="pick-grade" data-grade="1">
              <div class="grade-big">小一</div>
              <div class="grade-small">基礎數感</div>
            </button>
            <button class="grade-chip" type="button" data-action="pick-grade" data-grade="2">
              <div class="grade-big">小二</div>
              <div class="grade-small">加減乘除</div>
            </button>
            <button class="grade-chip" type="button" data-action="pick-grade" data-grade="3">
              <div class="grade-big">小三</div>
              <div class="grade-small">位值與應用</div>
            </button>
          </div>
        </div>

        <div class="panel">
          <div class="panel-head">
            <div class="panel-title">五大模組</div>
            <div id="moduleBadge" class="badge">請先選年級</div>
          </div>

          <div id="moduleGrid" class="module-grid"></div>

          <div class="panel-note" id="moduleNote">
            小一先做「理解型」五大模組；乘除在小二/小三開放（可在程式調整）。
          </div>
        </div>
      </section>

      <!-- Practice -->
      <section id="page-practice" class="page" aria-label="練習">
        <div class="panel">
          <div class="panel-head">
            <div class="panel-title">練習</div>
            <div id="practiceBadge" class="badge">尚未開始</div>
          </div>

          <div class="practice-card">
            <div id="practiceTitle" class="practice-title">請從「首頁」選擇模組開始</div>

            <div class="practice-meta">
              <div id="practiceProgress" class="meta-pill">0/0</div>
              <div id="practiceScore" class="meta-pill">✅ 0　❌ 0</div>
              <div id="practiceTimer" class="meta-pill">⏱ 0s</div>
            </div>

            <div id="question" class="question">—</div>
            <div id="choices" class="choices"></div>

            <div class="practice-actions">
              <button id="btnNext" class="btn" type="button" data-action="next-q" disabled>下一題</button>
              <button class="btn btn-ghost" type="button" data-action="end-practice">結束練習</button>
            </div>

            <div id="status" class="status">提示：答對會自動下一題，答錯再按「下一題」</div>

            <div id="report" class="report is-hidden"></div>
          </div>
        </div>
      </section>

      <!-- Records -->
      <section id="page-records" class="page" aria-label="紀錄">
        <div class="panel">
          <div class="panel-head">
            <div class="panel-title">學習紀錄</div>
            <div class="panel-actions">
              <button class="btn btn-ghost" type="button" data-action="refresh-records">更新紀錄</button>
              <button class="btn btn-danger" type="button" data-action="clear-records">清除紀錄</button>
            </div>
          </div>

          <div id="recordsList" class="records"></div>
        </div>
      </section>

      <!-- Settings -->
      <section id="page-settings" class="page" aria-label="設定">
        <div class="panel">
          <div class="panel-head">
            <div class="panel-title">設定</div>
            <div class="badge">家長功能</div>
          </div>

          <div class="settings">
            <div class="setting-item">
              <div class="setting-left">
                <div class="setting-title">家長密碼</div>
                <div class="setting