<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>æˆ‘çš„å­¸ç¿’æ©Ÿ</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div class="app">
    <div class="topbar">
      <div class="brand">
        <span class="book">ğŸ“˜</span>
        <span class="title">æˆ‘çš„å­¸ç¿’æ©Ÿ</span>
      </div>
      <button class="pill">å®¶é•·æ¨¡å¼</button>
    </div>

    <div class="card">
      <h2>å°ä¸€æ•¸å­¸</h2>

      <!-- æ¨¡çµ„å¡ç‰‡ -->
      <div class="module">
        <div class="module-box">
          <div class="module-head">
            <div class="anno-line" id="m1Title"></div>
          </div>

          <div class="module-body">
            <div class="anno-line" id="m1Body"></div>
          </div>
        </div>

        <div class="note">æç¤ºï¼šæ³¨éŸ³æ˜¯ã€Œåœ¨å­—çš„å³é‚Šã€ç›´æ’ï¼ˆèª²æœ¬æ’ç‰ˆï¼‰ã€‚</div>
      </div>
    </div>
  </div>

  <script>
    /**
     * ç”Ÿæˆã€Œä¸»å­— + å³å´ç›´æ’æ³¨éŸ³ã€çš„æ’ç‰ˆ
     * text: æ–‡å­—å­—ä¸²ï¼ˆå»ºè­°ï¼šä¸è¦å¤ªé•·ï¼‰
     * zys:  æ³¨éŸ³é™£åˆ—ï¼ˆé•·åº¦è¦ç­‰æ–¼ text çš„å­—æ•¸ï¼›æ²’æ³¨éŸ³ç”¨ ""ï¼‰
     */
    function renderZhuyinLine(el, text, zys) {
      if (!el) return;
      el.innerHTML = "";

      const chars = Array.from(text);
      if (!Array.isArray(zys) || zys.length !== chars.length) {
        // é•·åº¦ä¸å°å°±å…ˆå…¨éƒ¨ä¸é¡¯ç¤ºæ³¨éŸ³ï¼ˆé¿å…å£ç‰ˆï¼‰
        zys = chars.map(() => "");
      }

      chars.forEach((ch, i) => {
        // æ¨™é»ç¬¦è™Ÿç•¶ä½œã€Œç„¡æ³¨éŸ³å­—æ ¼ã€
        const isPunct = /[ï¼Œã€‚ã€ï¼ï¼Ÿï¼›ï¼šã€Œã€ã€ã€ï¼ˆï¼‰()ã€ã€‘ã€Šã€‹â€¦Â·\s]/.test(ch);

        const cell = document.createElement("span");
        cell.className = "zy-cell" + (isPunct ? " punct" : "");

        const main = document.createElement("span");
        main.className = "zy-main";
        main.textContent = ch;

        const zy = document.createElement("span");
        zy.className = "zy-rt";
        zy.textContent = zys[i] || "";

        cell.appendChild(main);
        cell.appendChild(zy);
        el.appendChild(cell);
      });
    }

    // ======= ç¯„ä¾‹ï¼šä½ å¯ä»¥ç…§é€™ç¨®æ ¼å¼ä¸€ç›´åŠ æ¨¡çµ„ =======

    // æ¨™é¡Œï¼šæ•¸èˆ‡æ•¸é‡ï¼ˆ0ï½20ï¼‰
    const titleText = "æ•¸èˆ‡æ•¸é‡ï¼ˆ0ï½20ï¼‰";
    // å°æ‡‰æ¯å€‹å­—çš„æ³¨éŸ³ï¼ˆæ²’æ³¨éŸ³å¡« ""ï¼‰
    const titleZy = [
      "ã„•ã„¨Ë‹","ã„©Ë‡","ã„•ã„¨Ë‹","ã„Œã„§ã„¤Ë‹",
      "","","","","",""  // ï¼ˆ 0 ï½ 2 0 ï¼‰ é€™äº›ä¸éœ€è¦æ³¨éŸ³
    ];

    // å…§æ–‡ï¼šèªè­˜æ•¸å­—ï¼Œä¸€å€‹ä¸€å€‹æ•¸å‡ºä¾†ï¼Œå»ºç«‹æ•¸é‡æ¦‚å¿µã€‚
    const bodyText = "èªè­˜æ•¸å­—ï¼Œä¸€å€‹ä¸€å€‹æ•¸å‡ºä¾†ï¼Œå»ºç«‹æ•¸é‡æ¦‚å¿µã€‚";
    const bodyZy = [
      "ã„–ã„£Ë‹","ã„•Ë‹","ã„•ã„¨Ë‹","ã„—Ë‹","",
      "ã„§","ã„ã„œË‹","ã„§","ã„ã„œË‹","ã„•ã„¨Ë‡","ã„”ã„¨","ã„Œã„ËŠ","",
      "ã„ã„§ã„¢Ë‹","ã„Œã„§Ë‹","ã„•ã„¨Ë‹","ã„Œã„§ã„¤Ë‹","ã„ã„Ë‹","ã„‹ã„§ã„¢Ë‹",""
    ];

    renderZhuyinLine(document.getElementById("m1Title"), titleText, titleZy);
    renderZhuyinLine(document.getElementById("m1Body"), bodyText, bodyZy);
  </script>
</body>
</html>
