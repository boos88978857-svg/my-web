*{ box-sizing:border-box; }
:root{
  --bg:#f5f6f7;
  --card:#ffffff;
  --ink:#111;
  --muted:#666;
  --brand:#13a6ad;
  --blue:#1e88e5;
  --danger:#d32f2f;
  --soft:#f2f2f2;
  --softBlue:#e6f3ff;
  --radius:22px;
}

body{
  margin:0;
  font-family:-apple-system,BlinkMacSystemFont,"PingFang TC","Microsoft JhengHei","Noto Sans TC",sans-serif;
  background:var(--bg);
  color:var(--ink);
}

.app{
  max-width:980px;
  margin:0 auto;
  padding:16px 16px 92px;
}

/* Topbar */
.topbar{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:12px;
  background:linear-gradient(135deg, #1bb6bd, var(--brand));
  color:#fff;
  border-radius:18px;
  padding:14px 14px;
  margin-bottom:14px;
  box-shadow:0 10px 22px rgba(0,0,0,.08);
}

.brand{ display:flex; align-items:center; gap:12px; }
.book{ font-size:26px; }
.brand-text{ display:flex; flex-direction:column; line-height:1.2; }
.brand-title{ font-size:26px; font-weight:1000; letter-spacing:.02em; }
.brand-sub{ font-size:13px; opacity:.92; font-weight:700; }

.pill{
  background:rgba(255,255,255,.92);
  border:2px solid rgba(255,255,255,.65);
  color:var(--blue);
  font-weight:1000;
  border-radius:18px;
  padding:10px 14px;
  font-size:16px;
}

.main{ min-height: 55vh; }

/* Pages */
.page{ display:none; }
.page.active{ display:block; }

.panel{
  background:var(--card);
  border-radius:var(--radius);
  padding:18px;
  box-shadow:0 2px 10px rgba(0,0,0,0.06);
  margin-bottom:14px;
}

.panel-head{
  display:flex;
  align-items:flex-end;
  justify-content:space-between;
  gap:10px;
  margin-bottom:12px;
}

h2{
  margin:0;
  font-size:30px;
  font-weight:1000;
}

.badge{
  background:var(--softBlue);
  color:#2c6fb3;
  font-weight:1000;
  border-radius:999px;
  padding:8px 12px;
  font-size:14px;
  white-space:nowrap;
}

/* Grade row */
.grade-row{
  display:grid;
  grid-template-columns: repeat(3, 1fr);
  gap:12px;
}

.grade-card{
  border:0;
  border-radius:18px;
  padding:14px;
  background:var(--softBlue);
  text-align:left;
  box-shadow: inset 0 0 0 1px rgba(0,0,0,.05);
}

.grade-card .grade-title{
  font-size:24px;
  font-weight:1000;
  color:var(--blue);
}

.grade-card .grade-desc{
  margin-top:6px;
  font-size:14px;
  font-weight:800;
  color:#4b4b4b;
}

.grade-card.active{
  outline:3px solid rgba(30,136,229,.35);
  background:#d9eeff;
}

/* Module grid */
.module-grid{
  display:grid;
  grid-template-columns: repeat(2, 1fr);
  gap:12px;
}

.module-card{
  border:0;
  border-radius:18px;
  padding:14px;
  background:var(--soft);
  display:flex;
  align-items:center;
  gap:12px;
  text-align:left;
  box-shadow: inset 0 0 0 1px rgba(0,0,0,.04);
}

.module-card:disabled{
  opacity:.45;
}

.module-icon{
  width:44px;
  height:44px;
  border-radius:14px;
  background:#e9eef3;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:24px;
  flex:0 0 44px;
}

.module-text{
  display:flex;
  flex-direction:column;
  gap:4px;
  min-width:0;
}

.module-title{
  font-size:20px;
  font-weight:1000;
  color:var(--blue);
  line-height:1.15;
  word-break:keep-all;
}

.module-subtitle{
  font-size:13px;
  font-weight:900;
  color:#5f7fa6;
  line-height:1.1;
}

.module-desc{
  font-size:14px;
  font-weight:800;
  color:#555;
  line-height:1.15;
}

/* Practice */
.practice-intro{
  color:#555;
  font-weight:800;
  background: #f3f3f3;
  border-radius:16px;
  padding:14px;
}

.practice{ margin-top: 6px; }

.progress-row{
  display:flex;
  justify-content:space-between;
  gap:10px;
  margin: 6px 0 10px;
  flex-wrap:wrap;
}

.progress-text, .score-text{
  font-weight:1000;
  color:#333;
}

.question{
  font-size:26px;
  font-weight:1000;
  margin: 12px 0 12px;
}

.choices{
  display:grid;
  gap:10px;
  margin-bottom: 10px;
}

.choice{
  border:0;
  border-radius:18px;
  background:#f1f1f1;
  padding:14px 12px;
  font-size:20px;
  font-weight:1000;
  text-align:left;
}

.choice.correct{ outline:3px solid #2e7d32; }
.choice.wrong{ outline:3px solid var(--danger); }

.row{
  display:flex;
  gap:10px;
  flex-wrap:wrap;
}

.pill2{
  background:#f0f0f0;
  border:0;
  color:var(--blue);
  font-weight:1000;
  border-radius:16px;
  padding:12px 16px;
  font-size:16px;
}

.pill2.danger{ color:var(--danger); }

.status{
  margin-top: 10px;
  font-size:18px;
  font-weight:1000;
}

.report{
  margin-top:10px;
  padding:12px;
  border-radius:14px;
  background:#f3f3f3;
  font-weight:1000;
}

/* History */
.history .item{
  background:#f3f3f3;
  border-radius:14px;
  padding:12px 14px;
  margin:10px 0;
}

.history .item b{
  display:block;
  margin-bottom:6px;
}

/* Settings */
.setting-card{
  background:#f3f3f3;
  border-radius:18px;
  padding:14px;
  margin:12px 0;
}
.setting-title{
  font-size:18px;
  font-weight:1000;
}
.setting-desc{
  margin-top:6px;
  font-size:14px;
  font-weight:800;
  color:#555;
  line-height:1.4;
}

/* Bottom tabs */
.tabs{
  position:fixed;
  left:0;
  right:0;
  bottom:0;
  background:#fff;
  border-top:1px solid rgba(0,0,0,.08);
  padding:10px 12px calc(10px + env(safe-area-inset-bottom));
  display:flex;
  justify-content:center;
  gap:10px;
  z-index:1000;
}

.tab{
  width: 22%;
  max-width: 170px;
  border:0;
  border-radius:16px;
  background:#f6f6f6;
  padding:10px 8px;
  font-weight:1000;
  display:flex;
  flex-direction:column;
  align-items:center;
  gap:4px;
  color:#333;
}

.tab span{ font-size:12px; }

.tab.active{
  background:var(--softBlue);
  color:var(--blue);
  outline:2px solid rgba(30,136,229,.25);
}

/* Modal */
.modal-mask{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.35);
  z-index:2000;
}

.modal{
  position:fixed;
  left:50%;
  top:50%;
  transform:translate(-50%,-50%);
  width:min(520px, 92vw);
  background:#fff;
  border-radius:18px;
  box-shadow:0 18px 40px rgba(0,0,0,.25);
  z-index:2001;
  overflow:hidden;
}

.modal-head{
  display:flex;
  align-items:center;
  justify-content:space-between;
  padding:14px 14px;
  background:#f6f6f6;
  border-bottom:1px solid rgba(0,0,0,.08);
}

.modal-title{
  font-weight:1000;
  font-size:18px;
}

.modal-close{
  border:0;
  background:transparent;
  font-size:18px;
  font-weight:1000;
}

.modal-body{
  padding:14px;
}

.field{
  display:flex;
  flex-direction:column;
  gap:6px;
  margin:10px 0;
}

.field label{
  font-weight:1000;
  font-size:14px;
  color:#333;
}

.field input{
  padding:12px 12px;
  border-radius:14px;
  border:1px solid rgba(0,0,0,.15);
  font-size:16px;
  font-weight:800;
}

.small{
  font-size:12px;
  font-weight:800;
  color:#666;
  line-height:1.4;
}

.hint{
  margin-top:12px;
  font-size:13px;
  font-weight:800;
  color:#666;
  line-height:1.4;
}