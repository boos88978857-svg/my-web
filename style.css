*{ box-sizing:border-box; }
body{
  margin:0;
  font-family:-apple-system,BlinkMacSystemFont,"PingFang TC","Microsoft JhengHei","Noto Sans TC",sans-serif;
  background:#f5f6f7;
  color:#111;
}

.app{
  max-width: 980px;
  margin: 0 auto;
  padding: 16px 16px 92px; /* 留底部導覽高度 */
}

.topbar{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap: 12px;
  background: linear-gradient(135deg,#14a6ad,#0e8ea1);
  color:#fff;
  border-radius: 18px;
  padding: 14px 16px;
  margin-bottom: 14px;
}

.brand{ display:flex; gap:12px; align-items:center; }
.book{ font-size: 26px; }
.brandText{ line-height:1.1; }
.brandTitle{ font-size: 26px; font-weight: 1000; }
.brandSub{ font-size: 13px; opacity:0.92; font-weight: 800; margin-top: 4px; }

.pill{
  background: rgba(255,255,255,0.92);
  border: 2px solid rgba(255,255,255,0.6);
  color:#117fb0;
  font-weight: 1000;
  border-radius: 16px;
  padding: 10px 14px;
  font-size: 18px;
}

.card{
  background:#fff;
  border-radius: 22px;
  padding: 18px;
  box-shadow: 0 2px 10px rgba(0,0,0,0.06);
  margin-bottom: 14px;
}

h2{
  margin: 2px 0 10px;
  font-size: 30px;
  font-weight: 1000;
}

.sep{
  border:none;
  height:1px;
  background:#eee;
  margin: 16px 0;
}

.row{
  display:flex;
  gap: 10px;
  flex-wrap: wrap;
  align-items:center;
}

.pill2{
  background:#f0f0f0;
  border:0;
  color:#1e88e5;
  font-weight: 1000;
  border-radius: 16px;
  padding: 12px 16px;
  font-size: 18px;
}
.pill2.danger{ color:#d32f2f; }

.pages .page{ display:none; }
.pages .page.active{ display:block; }

.sectionHead{
  display:flex;
  align-items:flex-start;
  justify-content:space-between;
  gap: 10px;
  margin-bottom: 10px;
}

.badge{
  background:#eaf4ff;
  color:#1e88e5;
  font-weight: 1000;
  border-radius: 999px;
  padding: 10px 14px;
  font-size: 16px;
  white-space: nowrap;
}

.gradeRow{
  display:grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 12px;
}

.gradeBtn{
  border:0;
  border-radius: 18px;
  background:#e9f4ff;
  padding: 14px 12px;
  text-align:left;
}
.gradeBtn.active{
  outline: 3px solid rgba(30,136,229,0.25);
  background:#dff1ff;
}
.gTitle{ font-size: 26px; font-weight: 1000; color:#1e88e5; }
.gSub{ font-size: 16px; font-weight: 900; color:#333; margin-top: 6px; opacity:0.9; }

.moduleGrid{
  display:grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 14px;
  margin-top: 10px;
}
.moduleCard{
  border:0;
  border-radius: 20px;
  background:#f3f3f3;
  padding: 14px;
  display:flex;
  gap: 12px;
  align-items:center;
  text-align:left;
  min-height: 86px;
}
.moduleCard[disabled]{
  opacity: 0.45;
}
.iconBubble{
  width: 54px;
  height: 54px;
  border-radius: 16px;
  background:#e8f2ff;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size: 26px;
  flex: 0 0 auto;
}
/* 五大模組：文字區（關鍵修正） */
.moduleText{
  flex: 1;
  min-width: 0;          /* ★★ 沒這行就一定會亂排 ★★ */
}

/* 主標題 */
.moduleTitle{
  font-size: 20px;
  font-weight: 900;
  color: #2a7de1;
  line-height: 1.25;
  word-break: keep-all;  /* 中文不亂斷 */
}

/* 括號小字：一定在下面 */
.moduleSub{
  margin-top: 4px;
  font-size: 14px;
  color: #666;
}
.moduleText{ min-width: 0; }
.moduleTitle{
  font-size: 22px;
  font-weight: 1000;
  color:#1e88e5;
  line-height: 1.1;
}
.moduleRange{
  font-size: 15px;
  font-weight: 1000;
  color:#1e88e5;
  opacity: 0.9;
  margin-top: 4px;
}
.moduleDesc{
  margin-top: 6px;
  font-size: 16px;
  font-weight: 900;
  color:#333;
  opacity: 0.9;
}

.hintText{
  margin-top: 12px;
  color:#555;
  font-weight: 900;
  font-size: 16px;
}

.bottomNav{
  position: fixed;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(255,255,255,0.98);
  border-top: 1px solid #eee;
  display:flex;
  justify-content:space-around;
  padding: 10px 10px env(safe-area-inset-bottom);
  z-index: 999;
}
.navBtn{
  border:0;
  background:transparent;
  font-weight: 1000;
  color:#666;
  border-radius: 18px;
  padding: 10px 16px;
  min-width: 84px;
}
.navBtn.active{
  background:#eaf4ff;
  color:#1e88e5;
  outline: 2px solid rgba(30,136,229,0.15);
}
.navBtn div{ font-size: 14px; margin-top: 6px; }

/* Practice */
.practiceTop{
  display:flex;
  align-items:flex-start;
  justify-content:space-between;
  gap: 10px;
}
.pTitle{
  font-size: 30px;
  font-weight: 1000;
}
.pMeta{
  font-size: 16px;
  font-weight: 1000;
  color:#444;
  margin-top: 6px;
}
.rightMeta{ text-align:right; }

.prompt{
  margin-top: 14px;
  font-size: 24px;
  font-weight: 1000;
}
.visualArea{
  margin-top: 12px;
  background:#f3f3f3;
  border-radius: 18px;
  padding: 14px;
  min-height: 76px;
}

.dots{
  display:flex;
  flex-wrap: wrap;
  gap: 10px 12px;
}
.dot{
  width: 18px;
  height: 18px;
  border-radius: 50%;
  background:#111;
  opacity: 0.9;
}

.choices{
  margin-top: 12px;
  display:grid;
  gap: 10px;
}
.choice{
  border:0;
  border-radius: 18px;
  background:#f1f1f1;
  padding: 14px 12px;
  font-size: 22px;
  font-weight: 1000;
  text-align:left;
}
.choice.correct{ outline: 3px solid #2e7d32; }
.choice.wrong{ outline: 3px solid #d32f2f; }

.status{
  margin-top: 12px;
  font-size: 18px;
  font-weight: 1000;
  color:#333;
}

/* Records */
.history .item{
  background:#f3f3f3;
  border-radius: 14px;
  padding: 12px 14px;
  margin: 10px 0;
}
.history .item b{
  display:block;
  margin-bottom: 8px;
}

.settingBlock{
  background:#f7f7f7;
  border-radius: 18px;
  padding: 14px;
}
.settingTitle{
  font-size: 20px;
  font-weight: 1000;
}
.settingDesc{
  margin-top: 6px;
  font-size: 15px;
  font-weight: 900;
  opacity: 0.9;
}
.smallNote{
  margin-top: 10px;
  font-size: 14px;
  font-weight: 900;
  color:#555;
}